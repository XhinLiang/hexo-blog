title: 写在快手入职 60 天
date: 2018-3-11 18:26:29
tags: [生活,随笔]
categories: 生活
toc: true
---

2018 年 1 月 11 日，我来到了一个更有技术追求的团队，同时也接受了一个自己从来没有接触过的技术栈。

### 技术栈

在以前，我一听到 `Java Web` 可能会嗤之以鼻，因为我觉得 Web 开发应该是轻量级的，像 `Ruby on Rails` `Django` `Flask` 或者一大票 `PHP` 框架（`Laravel` 除外）一样。首先是因为我觉得并不需要那么多的增加复杂性的东西，例如 `依赖注入` `AOP` ，是我觉得 `Java` 并发编程这个领域太过复杂了。

事实证明我错了，`Java` （或者说 `Spring` ）这么受欢迎是有原因的。至少在快手目前这个业务需求上，通过使用 `Java` 以及连带的一系列技术栈，在开发速度、代码质量、运行效率上取得了非常好的平衡。

在这 60 天里，我算是对 `Java Web` 的技术栈有了一点点了解，能够顺利开发业务并跟上团队节奏。

### Clean Code

快手的团队维护的代码质量，在我待过的团队里面，是最高的，而且比第二名超出很大的一段距离。

在快手，我看不到一大段一大段无用的被注释掉的代码。
在快手，我看不到一大堆一大堆被 IDE warnning 的代码。

厚着脸皮说一句，我自己的代码，在上面这两个点上一直是严格要求的。所以，在这个点上我做得还算可以。

### Code Review

在我们的 Git 工作流中，主功能的代码都会在 master 上开发并自测，所以每次提交的代码很有可能在几分钟之后就被带到线上。

基于此，在代码提交的时候，我必须对自己有更严格的要求：先自己对自己进行 Code Review，然后让别人对自己进行 Code Review。所以，这 60 天里，没有发生过因为我的代码引起的 Bug。

### 上线规范

粗心是任何人都不能避免的，但是规范流程是每个人都应该做到的。
快手目前使用 `ZooKeeper` 进行分布式配置管理，并有一套自己的 `Beta-Preview-Online` 的发布流程。发布流程一般是由 `OnCall` 来做的，而修改配置一般是由普通的 `Developer` 来做的。

配置是全局的，我们的很多功能是通过配置来进行灰度开关的，修改错一个配置，会影响到所有的集群。

在这个点上，我做的还不够好。因为我改错过一个配置，也进行过一次错误的上线。所幸这两个错误都没有造成太大的影响，今后一定注意。
